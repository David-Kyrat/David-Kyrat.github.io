<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Cours 02 - SSH # | University Projects and other Resources</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Cours 02 - SSH #" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Repo used to host &amp; quickly access resources, projects and other things Uni-related with GitHub pages" />
<meta property="og:description" content="Repo used to host &amp; quickly access resources, projects and other things Uni-related with GitHub pages" />
<link rel="canonical" href="http://localhost:4000/FBI-Notes/cours02_SSH.html" />
<meta property="og:url" content="http://localhost:4000/FBI-Notes/cours02_SSH.html" />
<meta property="og:site_name" content="University Projects and other Resources" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Cours 02 - SSH #" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Repo used to host &amp; quickly access resources, projects and other things Uni-related with GitHub pages","headline":"Cours 02 - SSH #","url":"http://localhost:4000/FBI-Notes/cours02_SSH.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=f00336b20b1403d56449e50e603afb5f3944b691">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">Cours 02 - SSH  #</h1>
      <h2 class="project-tagline">Repo used to host & quickly access resources, projects and other things Uni-related with GitHub pages</h2>
      
        <a href="https://github.com/David-Kyrat/David-Kyrat.github.io" class="btn">View on GitHub</a>
      
      
        <a href="https://github.com/David-Kyrat/David-Kyrat.github.io/zipball/gh-pages" class="btn">Download .zip</a>
        <a href="https://github.com/David-Kyrat/David-Kyrat.github.io/tarball/gh-pages" class="btn">Download .tar.gz</a>
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="cours-02---ssh-">Cours 02 - SSH <sup id="fnref:1" role="doc-noteref"><a href="#fn:1" class="footnote" rel="footnote">1</a></sup></h1>

<h2 id="login">Login</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ssh login@mon.server.com
</code></pre></div></div>

<p>MIM attack =&gt; Man in the Middle =&gt; Qqn qui se met entre nous et la machine<br />
=&gt; Besoin de s’authentifier ET soi pour se connecter au serveur<br />
ET aussi authentifier le serveur (que ce à quoi on se connecte soit bien le serveur) i.e. check authenticity.</p>

<p>=&gt; Se fait via fingerprint.</p>

<h4 id="exo-avec-cuilxaunigech">Exo avec <code class="language-plaintext highlighter-rouge">cuilxa.unige.ch</code></h4>

<p>Ici le fingerprint est: <code class="language-plaintext highlighter-rouge">SHA256:FuonkDNdyZ6e5Xl5cYijKOIKEjjcvklc6nGzuAPetSc</code></p>

<p>Lors de la connection, le terminal nous demande si l’on veut bien se connecter au serveur dont la clé fingerprint est <em>displays fingerprint</em><br />
et l’on peut répondre en mettant celle que l’on attend de trouver et le terminal va s’occuper de voir si c’est la même ou non pour nous. i.e. :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ssh login@mon.serveur.com
	&gt; authenticity of host can't be verified. fingerprint is: &lt;fingerprint&gt; 
	&gt; Are you sure you want to continue connecting (yes/no/[fingerprint])? 

$ &lt;fingerprint&gt;
	&gt; Added &lt;mon.serveur.com&gt; to list of known host 
	&gt; login@mon.serveur.com's password:

$ &lt;password&gt;
	&gt; Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-89-generic x86_64) ...
	&gt; ...
</code></pre></div></div>

<p><small> Connection to server. (if fingerprint matches)</small></p>

<!-- <img src="./img/first_ssh_login_0.png" alt="first_ssh_login_0" width="100%"/> -->
<p><img src="/FBI-Notes/img/first_ssh_login_0.png" alt="first_ssh_login_0" /></p>

<!-- <img src="./img/first_ssh_login_1.png" alt="first_ssh_login_1" width="60%", height="120%"/> -->
<p><img src="/FBI-Notes/img/first_ssh_login_1.png" alt="first_ssh_login_1" /></p>

<hr />

<h2 id="scp">SCP</h2>

<p>La commande SCP permet de copier des fichier d’un serveur vers la machine locale et vice-versa</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ scp login@mon.server.com:/path/to/my/file /path/to/destination
$ scp /path/to/my/file login@mon.server.com:/path/to/destination
</code></pre></div></div>

<p>Les formats de chemin habituels sont disponibles <code class="language-plaintext highlighter-rouge">(*, ?, ~, etc.)</code></p>

<h4 id="exos">Exos</h4>

<p><img src="/FBI-Notes/img/ssh_exo2.png" alt="ssh_exo2" />
<small> (on peut copier des dossiers juste mettre <code class="language-plaintext highlighter-rouge">-r</code>) </small></p>

<p>==&gt; Modifications en local</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo "Modif en local" &gt;&gt; home_dir_content.txt
</code></pre></div></div>

<p>==&gt; Push back on server with ssh</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ressources/exo_ssh$ scp ./home_dir_content.txt munz3@cuilxa.unige.ch:~/exo_ssh/
						&gt; munz3@cuilxa.unige.ch's password: 
						&gt; home_dir_content.txt                                                                                         	100%  658    99.1KB/s   00:00

ressources/exo_ssh$ |
</code></pre></div></div>

<p>Fichier a été uploaded on server. <strong>PAS OUBLIER LE “<code class="language-plaintext highlighter-rouge">:</code>” ENTRE SERVER &amp; PATH !!</strong></p>

<hr />

<h2 id="authentification-par-clés-rsa--">Authentification par clés RSA  <sup id="fnref:2" role="doc-noteref"><a href="#fn:2" class="footnote" rel="footnote">2</a></sup></h2>

<p><strong>Génération de la paire de clé rsa</strong>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
~/Documents/FBI/exo_ssh$ ssh-keygen
		
		&gt; Generating public/private rsa key pair.
		&gt; Enter file in which to save the key (/home/noahm/.ssh/id_rsa): ssh_exo3_rsa_key
		&gt; Enter passphrase (empty for no passphrase): 
		&gt; Enter same passphrase again: 

		&gt; Your identification has been saved in ssh_exo3_rsa_key
		&gt; Your public key has been saved in ssh_exo3_rsa_key.pub
		
		&gt; The key fingerprint is:
		&gt; SHA256:O5Go4cs24bg6pqV9rYAIztKU1DZ5mX8X7dFGKBh3+WU noahm@noahm-HP-Spectre
		
		&gt; The key's randomart image is:
+---[RSA 3072]----+
|          .o. .o.|
|   . . o  ...oooE|
|  . = +     ..oo+|
| . o o o .   o o.|
|. o . . S . . .  |
|=+ ..o   + .     |
|+o+ooo  o        |
|o=.o=..  .       |
|*oo++o           |
+----[SHA256]-----+

</code></pre></div></div>

<p>2 files saved :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@noahm:~/Documents/FBI/exo_ssh$ ls -la

	&gt; total 20
	&gt; drwxrwxr-x 2 noahm noahm 4096 Nov  9 10:55 .
	&gt; drwxrwxr-x 6 noahm noahm 4096 Nov  9 10:42 ..
	&gt; -rw------- 1 noahm noahm 2610 Nov  9 10:55 exo3_rsaKey
	&gt; -rw-r--r-- 1 noahm noahm  576 Nov  9 10:55 exo3_rsaKey.pub
	&gt; -rw-r--r-- 1 noahm noahm  658 Nov  9 10:43 home_dir_content.txt  
</code></pre></div></div>

<p><strong>Copie de la clé publique sur le serveur:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@noahm:~/Documents/FBI/exo_ssh$ ssh-copy-id -i ./exo3_rsaKey.pub munz3@cuilxa.unige.ch
	
	&gt; /usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "./exo3_rsaKey.pub"
	
	&gt; /usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
	&gt; /usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
	
	&gt; munz3@cuilxa.unige.ch's password: 


@noahm:~/Documents/FBI/exo_ssh$ &lt;password&gt;

	&gt; Number of key(s) added: 1
	&gt; Now try logging into the machine, with: "ssh munz3@cuilxa.unige.ch" and check to make sure that only the key(s) you wanted were added.	
</code></pre></div></div>

<p><strong>Login:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>noahm@noahm-HP-Spectre:~/Documents/FBI/exo_ssh$ ssh munz3@cuilxa.unige.ch
	&gt; munz3@cuilxa.unige.ch's password: 

	&gt; Welcome to Ubuntu 20.04.3 LTS (GNU/Linux 5.4.0-89-generic x86_64)
	&gt; ...
	&gt; Last login: Tue Nov  9 10:51:46 2021 from 10.20.113.11

munz3@cuilxa:~$ exit
	&gt; logout
	&gt; Connection to cuilxa.unige.ch closed.
</code></pre></div></div>

<p><em>==&gt; Supposed not to ask for password, how to do it ?</em></p>

<p><br /> 
<br />
<!-- --------------------------------------------------------------------------- --></p>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1" role="doc-endnote">
      <p><a href="https://cui.unige.ch/~chanel/prez/presentations/outils-info/shell/#/9">Connexion à distance: SSH</a> <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2" role="doc-endnote">
      <p><a href="https://cui.unige.ch/~chanel/prez/presentations/outils-info/shell/#/9/6">SCP-Auth_par_clé_publique</a> <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/David-Kyrat/David-Kyrat.github.io">David-Kyrat.github.io</a> is maintained by <a href="https://github.com/David-Kyrat">David-Kyrat</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
  </body>
</html>
